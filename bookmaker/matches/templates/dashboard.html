{% include 'includes/header.html' %}

    <div class="dashboard" x-data="{ activeTab: 'today' }">
        <!-- Header -->
        <div class="header">
            <h1 class="glow">XSTAKE ODDS</h1>
            <p>Real-time Football Betting Odds Dashboard</p>
        </div>

        <!-- Tab Navigation -->
        <div class="card">
            <div class="tab-buttons">
                <button
                    @click="activeTab = 'today'"
                    class="tab-button"
                    :class="{ 'active': activeTab === 'today' }"
                >
                    <i class="fas fa-bolt"></i> Today's Matches
                </button>
                <button
                    @click="activeTab = 'upcoming'"
                    class="tab-button"
                    :class="{ 'active': activeTab === 'upcoming' }"
                >
                    <i class="fas fa-calendar"></i> Upcoming Matches
                </button>
            </div>
        </div>

        <!-- Today's Matches -->
        <div x-show="activeTab === 'today'">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-bolt" style="color: var(--secondary);"></i>
                        Live & Today's Matches
                    </h2>
                    <span class="today-badge">{{ today_matches|length }} matches</span>
                </div>

                {% if today_matches %}
                    {% for match in today_matches %}
                    <div class="match-card" onclick="window.location.href='{% url 'match_detail' match.id %}'">
                        <div class="teams">
                            <!-- Home Team with Logo -->
                            <div class="team team-home">
                                {% if match.home_team.logo_url %}
                                <img src="{{ match.home_team.logo_url }}" 
                                     alt="{{ match.home_team.name }} logo" 
                                     class="team-logo"
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                {% endif %}
                                <div class="no-logo" style="{% if match.home_team.logo_url %}display: none;{% endif %}">
                                    {{ match.home_team.name|slice:":3"|upper }}
                                </div>
                                <span>{{ match.home_team.name }}</span>
                            </div>
                            
                            <div class="vs">VS</div>
                            
                            <!-- Away Team with Logo -->
                            <div class="team team-away">
                                {% if match.away_team.logo_url %}
                                <img src="{{ match.away_team.logo_url }}" 
                                     alt="{{ match.away_team.name }} logo" 
                                     class="team-logo"
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                {% endif %}
                                <div class="no-logo" style="{% if match.away_team.logo_url %}display: none;{% endif %}">
                                    {{ match.away_team.name|slice:":3"|upper }}
                                </div>
                                <span>{{ match.away_team.name }}</span>
                            </div>
                        </div>

                        <div class="match-info">
                            <div>
                                <i class="fas fa-trophy" style="color: var(--secondary);"></i>
                                {{ match.league }}
                            </div>
                            <div>
                                <i class="fas fa-clock" style="color: var(--text-muted);"></i>
                                {{ match.match_date|time }}
                            </div>
                        </div>

                        <div class="odds-grid">
                            {% for odds in match.odds.all %}
                            <div class="odds-card">
                                <div class="bookmaker-name">{{ odds.bookmaker.name }}</div>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                                    <div>
                                        <div class="odds-value">{{ odds.home_odds }}</div>
                                        <div class="odds-type">Home</div>
                                    </div>
                                    <div>
                                        <div class="odds-value">{{ odds.draw_odds }}</div>
                                        <div class="odds-type">Draw</div>
                                    </div>
                                    <div>
                                        <div class="odds-value">{{ odds.away_odds }}</div>
                                        <div class="odds-type">Away</div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="empty-state">
                        <i class="fas fa-futbol"></i>
                        <h3>No matches today</h3>
                        <p>Check back later for today's fixtures</p>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Upcoming Matches -->
        <div x-show="activeTab === 'upcoming'">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-calendar" style="color: var(--primary-glow);"></i>
                        Upcoming Matches (Next 7 Days)
                    </h2>
                    <span class="today-badge">{{ upcoming_matches|length }} matches</span>
                </div>

                {% if upcoming_matches %}
                    {% for match in upcoming_matches %}
                    <div class="match-card" onclick="window.location.href='{% url 'match_detail' match.id %}'">
                        <div class="teams">
                            <!-- Home Team with Logo -->
                            <div class="team team-home">
                                {% if match.home_team.logo_url %}
                                <img src="{{ match.home_team.logo_url }}" 
                                     alt="{{ match.home_team.name }} logo" 
                                     class="team-logo"
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                {% endif %}
                                <div class="no-logo" style="{% if match.home_team.logo_url %}display: none;{% endif %}">
                                    {{ match.home_team.name|slice:":3"|upper }}
                                </div>
                                <span>{{ match.home_team.name }}</span>
                            </div>
                            
                            <div class="vs">VS</div>
                            
                            <!-- Away Team with Logo -->
                            <div class="team team-away">
                                {% if match.away_team.logo_url %}
                                <img src="{{ match.away_team.logo_url }}" 
                                     alt="{{ match.away_team.name }} logo" 
                                     class="team-logo"
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                {% endif %}
                                <div class="no-logo" style="{% if match.away_team.logo_url %}display: none;{% endif %}">
                                    {{ match.away_team.name|slice:":3"|upper }}
                                </div>
                                <span>{{ match.away_team.name }}</span>
                            </div>
                        </div>

                        <div class="match-info">
                            <div>
                                <i class="fas fa-trophy" style="color: var(--secondary);"></i>
                                {{ match.league }}
                            </div>
                            <div>
                                <i class="fas fa-calendar-day" style="color: var(--text-muted);"></i>
                                {{ match.match_date|date:"M d, Y" }} at {{ match.match_date|time }}
                            </div>
                        </div>

                        {% if match.odds.all %}
                        <div class="odds-grid">
                            {% for odds in match.odds.all %}
                            <div class="odds-card">
                                <div class="bookmaker-name">{{ odds.bookmaker.name }}</div>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                                    <div>
                                        <div class="odds-value">{{ odds.home_odds }}</div>
                                        <div class="odds-type">Home</div>
                                    </div>
                                    <div>
                                        <div class="odds-value">{{ odds.draw_odds }}</div>
                                        <div class="odds-type">Draw</div>
                                    </div>
                                    <div>
                                        <div class="odds-value">{{ odds.away_odds }}</div>
                                        <div class="odds-type">Away</div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div style="text-align: center; padding: 1rem; color: var(--text-muted);">
                            <i class="fas fa-clock"></i> Odds not available yet
                        </div>
                        {% endif %}
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="empty-state">
                        <i class="fas fa-calendar-plus"></i>
                        <h3>No upcoming matches</h3>
                        <p>Matches will appear here as they're scheduled</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

{% include 'includes/footer.html' %}